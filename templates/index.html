<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Horario Gen√©tico</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üß¨ Algoritmo Gen√©tico ‚Äì Horario Com√∫n</h1>

        <div class="panel">
            <div class="config">
                <h2>üõ† Configuraci√≥n</h2>
                <label for="generaciones">Generaciones:</label>
                <input type="number" id="generaciones" value="50" min="1">
                
                <label for="tamano">Tama√±o de poblaci√≥n:</label>
                <input type="number" id="tamano" value="5" min="2">

                <label for="mutacion">Tasa de Mutaci√≥n: <span id="mutacion-valor">0.1</span></label>
                <input type="range" id="mutacion" min="0" max="1" step="0.01" value="0.1" oninput="document.getElementById('mutacion-valor').textContent = this.value">

                <button onclick="ejecutarAlgoritmo()">üöÄ Ejecutar Algoritmo Gen√©tico</button>
            </div>

            <div class="resultado">
                <div id="loader" style="display:none">
                    <div class="spinner"></div>
                    <p>Ejecutando Algoritmo Gen√©tico...</p>
                </div>
                <div id="output"></div>
            </div>
        </div>
    </div>

    <script>
        async function ejecutarAlgoritmo() {
            const gen = document.getElementById('generaciones').value;
            const tam = document.getElementById('tamano').value;
            const mut = document.getElementById('mutacion').value;

            document.getElementById('loader').style.display = 'block';
            document.getElementById('output').innerHTML = '';

            const res = await fetch(`/ejecutar?gen=${gen}&tam=${tam}&mut=${mut}`);
            const data = await res.json();

            document.getElementById('loader').style.display = 'none';
            document.getElementById('output').innerHTML = `
                <h2>‚úÖ Horario encontrado: ${data.mejor_horario}</h2>
                <p><strong>Generaciones procesadas:</strong> ${data.generaciones}</p>
                <h3>Historial</h3>
                <ul>${data.historial.map((g, i) =>
                    `<li><strong>G${i+1}:</strong> ${g.map(p => `${p[0]} (${p[1]})`).join(', ')}</li>`
                ).join('')}</ul>
            `;
        }
    </script>
</body>
</html>
